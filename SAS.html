<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>SAS</title>

<script src="site_libs/header-attrs-2.13/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>










<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Analyse des durées</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Données et théorie
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Introduction.html">Introduction</a>
    </li>
    <li>
      <a href="Donnees.html">Les Données biographiques</a>
    </li>
    <li>
      <a href="Theorie.html">Eléments théoriques</a>
    </li>
  </ul>
</li>
<li>
  <a href="nonparam.html">Méthodes non paramétriques</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Modèles à risques proportionnels
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Intro_mod.html">Intro</a>
    </li>
    <li>
      <a href="cox.html">Cox</a>
    </li>
    <li>
      <a href="discret.html">Méthode à temps discret</a>
    </li>
    <li>
      <a href="dynamiques.html">Variables dynamiques</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Compléments
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="param.html">Modèles paramétriques</a>
    </li>
    <li>
      <a href="concurrents.html">Risques concurrents</a>
    </li>
    <li>
      <a href="cure.html">fragilité et imunité</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Programmation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="SAS.html">SAS</a>
    </li>
    <li>
      <a href="Stata.html">Stata</a>
    </li>
    <li>
      <a href="R.html">R</a>
    </li>
    <li>
      <a href="Python.html">Python</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">SAS</h1>

</div>


<p><br> <strong>Remarque: Sélection des outputs</strong><br />
Selon le type d’analyse la totalité des outputs ne seront pas reproduits (<code>ods include</code> ou <code>ods exclude</code> pour la sélection). Un problème spécifique s’observe pour le tableau des estimateurs de Kaplan-Meier qui est particulièrement illisible en présence d’un nombre important d’observations censurées.</p>
<p>Exemple pour <code>proc lifetest</code>: noms des outputs récupérés dans la log</p>
<pre><code>Output Added:
-------------
Name:       ProductLimitEstimates
Label:      Product-Limit Estimates
Template:   Stat.Lifetest.ProductLimitEstimates
Path:       Lifetest.Stratum1.ProductLimitEstimates
-------------

Output Added:
-------------
Name:       Quartiles
Label:      Quartiles of the Survival Distribution
Template:   Stat.Lifetest.Quartiles
Path:       Lifetest.Stratum1.TimeSummary.Quartiles
-------------

Output Added:
-------------
Name:       Means
Label:      Mean
Template:   Stat.Lifetest.Means
Path:       Lifetest.Stratum1.TimeSummary.Means
-------------

Output Added:
-------------
Name:       SurvivalPlot
Label:      Survival Curve
Template:   Stat.Lifetest.Graphics.ProductLimitSurvival
Path:       Lifetest.Stratum1.SurvivalPlot
-------------

Output Added:
-------------
Name:       CensoredSummary
Label:      Censored Summary
Template:   Stat.Lifetest.CensoredSummary
Path:       Lifetest.CensoredSummary</code></pre>
<p>Utiliser de préférence le nom figurant dans la ligne <strong>path:</strong> (si comparaison de deux strates, le nom figurant dans la ligne <strong>name</strong> est identique).</p>
<div id="analyse-non-paramétrique" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Analyse non paramétrique</h1>
<div id="méthode-actuarielle" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Méthode actuarielle</h2>
<p>Avec une longueur d’intervalle fixe égale à 30 jours.</p>
<p>La durée médiane est donnée par la colonne <strong>résidual median time</strong>. Sur la première ligne, il s’agit de la durée médiane sur toutes les personnes exposées au risque. Dans les lignes suivante, cette durée médiane est recalculée pour les personnes restant exposées au risque dans chaque intervalle.</p>
<pre><code>proc lifetest data=trans method=lifetable width=30;
time stime*died(0);run;</code></pre>
<p><img src="sas/1a.PNG" /></p>
<p><img src="sas/1b.PNG" /></p>
<p><img src="sas/1c.png" /></p>
</div>
<div id="méthode-kaplan-meier" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Méthode Kaplan-Meier</h2>
<p>Le tableau des estimateurs ne sera pas reporté (voir intro du document).<br />
Pour récupérer ces estimateurs, on peut les récupérer via l’instruction output et les exporter, par exemple, dans un tableur.</p>
<pre><code>ods exclude Lifetest.Stratum1.ProductLimitEstimates;
proc lifetest data=trans;
time stime*died(0); run;</code></pre>
<p><img src="sas/2a.PNG" /></p>
<p><img src="sas/2b.png" /></p>
<p><img src="sas/2c.PNG" /></p>
<p><strong>Warning sur la durée moyenne reportée</strong> Sauf exception ne pas interpréter le tableau donnant la durée moyenne. Se reporter à l’estimation des RMST plus bas.</p>
<p><strong>Comparaison des fonctions de survie</strong></p>
<p><em>Tests du log rank</em></p>
<pre><code>ods exclude Lifetest.Stratum1.ProductLimitEstimates Lifetest.Stratum2.ProductLimitEstimates ;
proc lifetest data=trans;
time stime*died(0);
strata surgery / test=all;
run;</code></pre>
<p><img src="sas/3a.png" /></p>
<p><img src="sas/3b.PNG" /></p>
<p><img src="sas/3c.PNG" /></p>
<p><img src="sas/3d.PNG" /></p>
<p><em>Comparaison des RMST</em></p>
<p>Disponible avec le dernier module stat de Sas base (Sas-Stat 15.1 novembre 2018).</p>
<pre><code>ods exclude Lifetest.Stratum1.ProductLimitEstimates;
proc lifetest data=trans rmst plots=(rmst);
time stime*died(0);
strata surgery; run;</code></pre>
<p><img src="sas/4.PNG" /> <strong>SAS STUDIO: en attente de la mise à jour du module SAS-STAT (on a 5 ans de retard)</strong></p>
</div>
</div>
<div id="modèle-semi-parametrique-de-cox" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Modèle semi parametrique de Cox</h1>
<div id="estimation-du-modèle" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Estimation du modèle</h2>
<pre><code>proc phreg data=trans;
model stime*died(0) = year age surgery ;
run;</code></pre>
<p><img src="sas/5a.PNG" /></p>
</div>
<div id="tests-de-lhypothèse-ph" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Tests de l’hypothèse PH</h2>
<div id="test-de-grambsch-therneau-sur-les-résidus-de-schoenfeld" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Test de Grambsch Therneau sur les résidus de Schoenfeld</h3>
<p>Demande au moins l’avant dernière version de Sas/Stat (2016?).</p>
<p>Le test est exécuté directement dans l’instruction <code>phreg</code> (ajouter <code>zph</code>). L’option global permet de récupérer le résultat du test omnibus (attention rejette facilement <span class="math inline">\(H_0\)</span> - hypothèse PH respectée - lorsque le nombre de degrés de liberté est élevé).</p>
<pre><code>ods select PHReg.zphTest;
proc phreg data=trans zph(global noplot);
model stime*died(0) = year age surgery ;
run;</code></pre>
<p><img src="sas/5b.PNG" /></p>
<p>Par défaut SAS utilise la transformation <span class="math inline">\(f(t)=t\)</span> (idem Stata). Pour obtenir l’option par défaut de R <span class="math inline">\(f(t) = 1 - KM(t)\)</span>:</p>
<pre><code>ods select PHReg.zphTest;
proc phreg data=trans zph(global noplot transform=km);
model stime*died(0) = year age surgery ;
run;</code></pre>
<p><img src="sas/5c.PNG" /></p>
</div>
<div id="introduction-dune-interaction-avec-la-durée" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Introduction d’une interaction avec la durée</h3>
<p><strong>Estimation d’un modèle avec indicatrices</strong><br />
La covariable doit être sous forme d’indicatrice (binaire: (0,1)). Ce qui est le cas ici avec la variable <em>surgery</em>.<br />
<br> Exemple avec une covariable X à 3 modalités codée 1,2,3.<br />
<br> Estimation du modèle de Cox avec l’instruction <code>class</code> (ref: X=1)</p>
<pre><code>proc phreg data=base;
class X(ref=&quot;1&quot;);
model variable_dur*variable_cens(0) = X; run;</code></pre>
<p>Estimation du modèle de Cox avec indicatrices</p>
<pre><code>data base; set base;
X1 = X=1;
X2 = X=2;
X3 = X=3; run;

proc phreg data=base;
model variable_dur*variable_cens(0) = X2 X3; run;</code></pre>
<p>La variable d’intéraction (<span class="math inline">\(surgeryt = surgery\times stime\)</span>) est générée, le temps de l’estimation après l’instruction <code>model</code>.</p>
<pre><code>ods select PHReg.ParameterEstimates;
proc phreg data=trans ;
model stime*died(0) = year age surgery surgeryt ;
surgeryt = surgery*stime;
run;</code></pre>
<p><img src="sas/5d.PNG" /></p>
</div>
</div>
<div id="introduction-dune-variable-dynamique-binaire" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Introduction d’une variable dynamique (binaire)</h2>
<p><strong>Warning: opération en ‘aveugle’</strong></p>
<p>Contrairement à R et Stata, la base n’a pas à être splittée, on ne peut pas vérifier si la variable dynamique a été correctement créée. La variable dynamique, qui peut être appréhendée comme une variable en intéraction avec la durée, est générée après l’instruction <code>model</code>.<br />
<br> Ici la tvc prendra la valeur 1 lorsque <em>stime&gt;wait</em>, 0 sinon.</p>
<pre><code>ods select PHReg.ParameterEstimates;
proc phreg data=trans;
model stime*died(0) = year age surgery tvc ;
tvc = transplant=1 and stime&gt;=wait;
run;</code></pre>
<p><img src="sas/6.PNG" /></p>
</div>
</div>
<div id="modèle-logistique-à-temps-discret" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Modèle (logistique à temps discret)</h1>
<div id="mise-en-forme-de-la-base-et-variables-danalyse" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Mise en forme de la base et variables d’analyse</h2>
<p>On utilise une boucle pour répliquer les lignes sur la valeur de la durée. La nouvelle variable de durée (t) sous forme de compteur est générée automatiquement.</p>
<pre><code>data td; set trans; 
do t=1 to mois; 
     output; 
     end; run;
     
data td; set td;
if t&lt;mois then died=0;
t2=t*t;
t3=t2*t; run;</code></pre>
</div>
<div id="fonction-continue-de-la-durée" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Fonction continue de la durée</h2>
<p><em>Estimation du modèle</em></p>
<pre><code>ods select Logistic.FitStatistics;
proc logistic data=td;
model died(ref=&quot;0&quot;) = t t2 t3 year age surgery  ; run;</code></pre>
<p><img src="sas/7a.PNG" /></p>
</div>
<div id="fonction-discrète-de-la-durée" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Fonction discrète de la durée</h2>
<p>Pour l’exemple on va regrouper la durée par ses quartiles. Pour chaque individu, on conserve seulement une observation dans chaque quartile.</p>
<pre><code>proc rank data=td out=td2 groups=4;
var t;
ranks tq4;
run;

data td2; set td2;
id2=put(id, 3.);
tq42=put(tq4, 1.);
g=id2 || tq42; run;

proc sort data=td2; by id tq4; run;

data td2; set td2;
by g;
if LAST.g; run;</code></pre>
<p><em>Estimation</em></p>
<pre><code>proc logistic data=td2;
class tq4 / param=ref;
model died(ref=&quot;0&quot;) = tq4 year age surgery; run;</code></pre>
<p><img src="sas/7c.PNG" /></p>
<p><img src="sas/7d.PNG" /></p>
</div>
</div>
<div id="modèles-paramétrique-de-type-aft" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Modèles paramétrique de type AFT</h1>
<p>On utilise la procédure proc <strong><code>lifereg</code></strong> et on indique le type de distribution</p>
<pre><code>proc lifereg data=trans;
model stime*died(0) = year age surgery /D=WEIBULL;
run;</code></pre>
<p><img src="sas/8a.PNG" /></p>
<p><img src="sas/8b.PNG" /></p>
<pre><code>proc lifereg data=trans;
model stime*died(0) = year age surgery /D=LLOGISTIC;
run;</code></pre>
<p><img src="sas/8c.PNG" /></p>
<p><img src="sas/8d.PNG" /></p>
</div>
<div id="risques-concurrents" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Risques concurrents</h1>
<div id="non-paramétriques" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Non paramétriques</h2>
<p>On indique en option la cause d’intérêt avec <strong><code>eventcode=valeur</code></strong> , les autres étant considérées commes des risques concurrents.</p>
<pre><code>proc lifetest data=trans plots=CIF;
time stime*compet(0) / eventcode=1; run;</code></pre>
<p><img src="sas/9a.PNG" /></p>
<p><img src="sas/9b.PNG" /></p>
<p><img src="sas/9c.png" /></p>
<p>Pour récupérer le test de Gray, on utilise l’instruction <code>strata</code>.</p>
<pre><code>proc lifetest data=trans plots=CIF;
time stime*compet(0) / eventcode=1
strata surgery; run;</code></pre>
<p><img src="sas/9f.PNG" /></p>
<p><img src="sas/9g.PNG" /></p>
</div>
<div id="modèles" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Modèles</h2>
<p><strong>Modèle de Fine-Gray</strong></p>
<pre><code>proc phreg data=trans;
model stime*compet(0) = year age surgery / eventcode=1  ;
run;</code></pre>
<p><img src="sas/9h.PNG" /></p>
<p><strong>Modèle logistique multinomial à temps discret</strong></p>
<pre><code>data td; set trans; 
do t=1 to mois; 
     output; 
     end; 
run;
data td; set td;
if t&lt;mois then compet=0;
t2=t*t
run;</code></pre>
<pre><code>proc logistic data=td;
model compet(ref=&quot;0&quot;) = t t2 year age surgery / link=glogit;
run;</code></pre>
<p><img src="sas/9i.PNG" /></p>
<p><img src="sas/9j.PNG" /></p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
