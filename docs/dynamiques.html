<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.207">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Analyse des durées - Variables dynamiques</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./parametrique.html" rel="next">
<link href="./discret.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="style.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Analyse des durées</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mthevenin/analyse_duree"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:marc.thevenin@ined.fr"><i class="bi bi-envelope" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Variables dynamiques</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false"><strong>Données et théorie</strong></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.html" class="sidebar-item-text sidebar-link">Introduction</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Donnees.html" class="sidebar-item-text sidebar-link">Les Données</a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false"><strong>Méthodes non paramétriques</strong></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./fsurvie.html" class="sidebar-item-text sidebar-link">Les fonctions de survie</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./comp_fsurvie.html" class="sidebar-item-text sidebar-link">Tests de comparaison</a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true"><strong>Modèles à risques proportionnels</strong></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_mod.html" class="sidebar-item-text sidebar-link">Introduction</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cox.html" class="sidebar-item-text sidebar-link">Modèle de Cox</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discret.html" class="sidebar-item-text sidebar-link">Modèle temps discret</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamiques.html" class="sidebar-item-text sidebar-link active">Variables dynamiques</a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false"><strong>Compléments</strong></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./parametrique.html" class="sidebar-item-text sidebar-link">Modèles paramétriques</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./concurrent.html" class="sidebar-item-text sidebar-link">Risques concurrents</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./frailty.html" class="sidebar-item-text sidebar-link">Fragilité et immunité</a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false"><strong>Programmation</strong></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R.html" class="sidebar-item-text sidebar-link">R</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Stata.html" class="sidebar-item-text sidebar-link">Stata</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Sas.html" class="sidebar-item-text sidebar-link">SAS</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Python.html" class="sidebar-item-text sidebar-link">PYTHON</a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false"><strong>Annexes</strong></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./annexes.html" class="sidebar-item-text sidebar-link">Annexes</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sections</h2>
   
  <ul>
  <li><a href="#facteur-dynamique-traitée-de-manière-fixe" id="toc-facteur-dynamique-traitée-de-manière-fixe" class="nav-link active" data-scroll-target="#facteur-dynamique-traitée-de-manière-fixe">Facteur dynamique traitée de manière fixe</a></li>
  <li><a href="#estimation-avec-une-variable-dynamique" id="toc-estimation-avec-une-variable-dynamique" class="nav-link" data-scroll-target="#estimation-avec-une-variable-dynamique">Estimation avec une variable dynamique</a>
  <ul class="collapse">
  <li><a href="#modèle-de-cox" id="toc-modèle-de-cox" class="nav-link" data-scroll-target="#modèle-de-cox">Modèle de Cox</a></li>
  <li><a href="#cox-solutions-logiciels" id="toc-cox-solutions-logiciels" class="nav-link" data-scroll-target="#cox-solutions-logiciels">Cox: solutions logiciels</a>
  <ul class="collapse">
  <li><a href="#modèle-à-temps-discret" id="toc-modèle-à-temps-discret" class="nav-link" data-scroll-target="#modèle-à-temps-discret">Modèle à temps discret</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#précautions" id="toc-précautions" class="nav-link" data-scroll-target="#précautions">Précautions</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title d-none d-lg-block">Variables dynamiques</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Cette section sera principalement traitée par l’exemple, et on ne s’intéressera qu’aux variables de type discrète, avec un seul changement d’état.</p>
<ul>
<li>Dans un modèle de durée, une variable dynamique peut-être appréhendée comme une intéraction entre la durée et une variable quantitative.</li>
<li>Pour un modèle de Cox, l’hypothèse de risque proportionnel ne peut donc pas être testée sur la variable d’origine.</li>
<li>Ne pas tenir compte du caractère dynamique d’une dimension peut conduire à des interprétations erronées.</li>
<li>Warning: La façon de modéliser les dimensions dynamiques en analyse des durées peut conduire à des biais de causalité, en particulier dans les sciences sociales, en omettant les effets d’anticipation. C’est une situation classique avec des covariables dynamiques de type discrètes. Les techniques standards ne peuvent modéliser que des effets d’adaptation : la cause - observée - précède l’effet.</li>
</ul>
<section id="facteur-dynamique-traitée-de-manière-fixe" class="level1">
<h1>Facteur dynamique traitée de manière fixe</h1>
<p>On reprend l’exemple sur malformation cardiaque, en ajoutant la variable relative à la greffe. La question est donc: une transplantation du coeur réduit-elle le risque journalier de décéder (ou augmente la durée de survie).<br>
On a dans la base 2 variables: une variable binaire pour savoir si l’individu à été greffé ou non, <strong>tranplant</strong>, et la variable <em>wait</em> de type continue tronquée donnant la durée en jour jusqu’à l’opération depuis l’inscription dans le registre (0 si <span class="math inline">\(transplant=0\)</span>).<br>
On va dans un premier temps estimer le modèle (de Cox) avec la variable fixe <em>transplant</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="sc">------------------------------------------------------------------------------</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>          _t <span class="sc">|</span> Haz. ratio   Std. err.      z    P<span class="sc">&gt;</span><span class="er">|</span>z<span class="sc">|</span>     [<span class="dv">95</span>% conf. interval]</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="sc">-------------+----------------------------------------------------------------</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>        year <span class="sc">|</span>      <span class="fl">0.926</span>      <span class="fl">0.061</span>    <span class="sc">-</span><span class="fl">1.16</span>   <span class="fl">0.246</span>        <span class="fl">0.813</span>       <span class="fl">1.055</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>         age <span class="sc">|</span>      <span class="fl">1.058</span>      <span class="fl">0.015</span>     <span class="fl">3.91</span>   <span class="fl">0.000</span>        <span class="fl">1.029</span>       <span class="fl">1.089</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>     surgery <span class="sc">|</span>      <span class="fl">0.537</span>      <span class="fl">0.241</span>    <span class="sc">-</span><span class="fl">1.38</span>   <span class="fl">0.167</span>        <span class="fl">0.223</span>       <span class="fl">1.296</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  transplant <span class="sc">|</span>      <span class="fl">0.251</span>      <span class="fl">0.079</span>    <span class="sc">-</span><span class="fl">4.38</span>   <span class="fl">0.000</span>        <span class="fl">0.135</span>       <span class="fl">0.466</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        wait <span class="sc">|</span>      <span class="fl">0.993</span>      <span class="fl">0.005</span>    <span class="sc">-</span><span class="fl">1.48</span>   <span class="fl">0.139</span>        <span class="fl">0.983</span>       <span class="fl">1.002</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="sc">------------------------------------------------------------------------------</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Interprétation: traité de manière fixe, la greffe réduit donc sensiblement le risque journalier de décéder</p>
<p>Au niveau des données le modèle à été estimé, pour une personne greffée (ici id=70), à partir de ce mapping:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+-------------------------------------------------------------+</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>      <span class="er">|</span> id   year   age   surgery   transp<span class="sc">~</span>t   wait   _d   _t   _t0 <span class="sc">|</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>      <span class="er">|</span><span class="sc">-------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fl">1896.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>    <span class="dv">1</span>     <span class="dv">0</span> <span class="sc">|</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fl">1897.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>    <span class="dv">2</span>     <span class="dv">1</span> <span class="sc">|</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fl">1898.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>    <span class="dv">3</span>     <span class="dv">2</span> <span class="sc">|</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fl">1899.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>    <span class="dv">5</span>     <span class="dv">3</span> <span class="sc">|</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fl">1900.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>    <span class="dv">6</span>     <span class="dv">5</span> <span class="sc">|</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>      <span class="er">|</span><span class="sc">-------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="fl">1901.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>    <span class="dv">8</span>     <span class="dv">6</span> <span class="sc">|</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="fl">1902.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>    <span class="dv">9</span>     <span class="dv">8</span> <span class="sc">|</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="fl">1903.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>   <span class="dv">12</span>     <span class="dv">9</span> <span class="sc">|</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="fl">1904.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>   <span class="dv">16</span>    <span class="dv">12</span> <span class="sc">|</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="fl">1905.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>   <span class="dv">17</span>    <span class="dv">16</span> <span class="sc">|</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>      <span class="er">|</span><span class="sc">-------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="fl">1906.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>   <span class="dv">18</span>    <span class="dv">17</span> <span class="sc">|</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="fl">1907.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>   <span class="dv">21</span>    <span class="dv">18</span> <span class="sc">|</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="fl">1908.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>   <span class="dv">28</span>    <span class="dv">21</span> <span class="sc">|</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="fl">1909.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">1</span>   <span class="dv">30</span>    <span class="dv">28</span> <span class="sc">|</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+-------------------------------------------------------------+</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Problème</strong>: une personne est codée greffée avant le jour de la transplantation. L’effet <em>causal</em> est donc mal mesuré si sa dimension temporelle a été ignorée, ici le jour exact de l’opération. C’est le même principe pour l’évènement, la personne est codée décédée (1) le jour du décès, et vivante avant (0).<br>
<br></p>
</section>
<section id="estimation-avec-une-variable-dynamique" class="level1">
<h1>Estimation avec une variable dynamique</h1>
<p>Il convient donc de modifier l’information avec le délai d’attente jusqu’à la greffe. Quel que soit le logiciel, le principe de construction de la variable suit la logique suivante:<br>
<span class="math inline">\(tvc = transplant\)</span> , si <span class="math inline">\(transplant=1\)</span> et <span class="math inline">\(_t&lt;wait\)</span> alors <span class="math inline">\(tvc=0\)</span>.</p>
<section id="modèle-de-cox" class="level3">
<h3 class="anchored" data-anchor-id="modèle-de-cox">Modèle de Cox</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>  <span class="sc">+---------------------------------------------------------------------+</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> id   year   age   surgery   tvc   wait   _d          _t         _t0 <span class="sc">|</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span><span class="sc">---------------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">12</span>    <span class="dv">0</span>           <span class="dv">1</span>           <span class="dv">0</span> <span class="sc">|</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">12</span>    <span class="dv">0</span>           <span class="dv">2</span>           <span class="dv">1</span> <span class="sc">|</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">12</span>    <span class="dv">0</span>           <span class="dv">3</span>           <span class="dv">2</span> <span class="sc">|</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">12</span>    <span class="dv">0</span>           <span class="dv">5</span>           <span class="dv">3</span> <span class="sc">|</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">12</span>    <span class="dv">0</span>   <span class="fl">5.0999999</span>           <span class="dv">5</span> <span class="sc">|</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span><span class="sc">---------------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">12</span>    <span class="dv">0</span>           <span class="dv">6</span>   <span class="fl">5.0999999</span> <span class="sc">|</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">12</span>    <span class="dv">0</span>           <span class="dv">8</span>           <span class="dv">6</span> <span class="sc">|</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">12</span>    <span class="dv">0</span>           <span class="dv">9</span>           <span class="dv">8</span> <span class="sc">|</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">12</span>           <span class="dv">9</span> <span class="sc">|</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">16</span>          <span class="dv">12</span> <span class="sc">|</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span><span class="sc">---------------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">17</span>          <span class="dv">16</span> <span class="sc">|</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">18</span>          <span class="dv">17</span> <span class="sc">|</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">21</span>          <span class="dv">18</span> <span class="sc">|</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">28</span>          <span class="dv">21</span> <span class="sc">|</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">30</span>          <span class="dv">28</span> <span class="sc">|</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span><span class="sc">---------------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">32</span>          <span class="dv">30</span> <span class="sc">|</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">35</span>          <span class="dv">32</span> <span class="sc">|</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">36</span>          <span class="dv">35</span> <span class="sc">|</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">37</span>          <span class="dv">36</span> <span class="sc">|</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">39</span>          <span class="dv">37</span> <span class="sc">|</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span><span class="sc">---------------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">40</span>          <span class="dv">39</span> <span class="sc">|</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">43</span>          <span class="dv">40</span> <span class="sc">|</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">45</span>          <span class="dv">43</span> <span class="sc">|</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">50</span>          <span class="dv">45</span> <span class="sc">|</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">51</span>          <span class="dv">50</span> <span class="sc">|</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span><span class="sc">---------------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">53</span>          <span class="dv">51</span> <span class="sc">|</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">1</span>          <span class="dv">58</span>          <span class="dv">53</span> <span class="sc">|</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>  <span class="sc">+---------------------------------------------------------------------+</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Maintenant, si on estime le modèle avec cette variable dynamique qui indique clairement le moment de la transition (jour de la greffe):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>Cox regression with Efron method <span class="cf">for</span> ties</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>No. of subjects <span class="ot">=</span>    <span class="dv">103</span>                                Number of obs <span class="ot">=</span>  <span class="dv">3</span>,<span class="dv">573</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>No. of failures <span class="ot">=</span>     <span class="dv">75</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>Time at risk    <span class="ot">=</span> <span class="dv">31</span>,<span class="dv">938</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>                                                        LR <span class="fu">chi2</span>(<span class="dv">4</span>)    <span class="ot">=</span>  <span class="fl">17.70</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>Log likelihood <span class="ot">=</span> <span class="sc">-</span><span class="fl">289.27014</span>                             Prob <span class="sc">&gt;</span> chi2   <span class="ot">=</span> <span class="fl">0.0014</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="sc">------------------------------------------------------------------------------</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>          _t <span class="sc">|</span> Haz. ratio   Std. err.      z    P<span class="sc">&gt;</span><span class="er">|</span>z<span class="sc">|</span>     [<span class="dv">95</span>% conf. interval]</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="sc">-------------+----------------------------------------------------------------</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>        year <span class="sc">|</span>      <span class="fl">0.887</span>      <span class="fl">0.060</span>    <span class="sc">-</span><span class="fl">1.79</span>   <span class="fl">0.074</span>        <span class="fl">0.777</span>       <span class="fl">1.012</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>         age <span class="sc">|</span>      <span class="fl">1.031</span>      <span class="fl">0.014</span>     <span class="fl">2.19</span>   <span class="fl">0.029</span>        <span class="fl">1.003</span>       <span class="fl">1.059</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>     surgery <span class="sc">|</span>      <span class="fl">0.374</span>      <span class="fl">0.163</span>    <span class="sc">-</span><span class="fl">2.25</span>   <span class="fl">0.024</span>        <span class="fl">0.159</span>       <span class="fl">0.880</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>         tvc <span class="sc">|</span>      <span class="fl">0.921</span>      <span class="fl">0.281</span>    <span class="sc">-</span><span class="fl">0.27</span>   <span class="fl">0.787</span>        <span class="fl">0.507</span>       <span class="fl">1.674</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="sc">------------------------------------------------------------------------------</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>L’impact de la greffe apparaît maintenant bien plus contestable sur la survie des individus, tout du moins elle ne l’augmente pas. Cela ne signifie pas non plus que des personnes ont pu être “sauvée” grâce à cette opération (ou plutôt leur durée de vie augmentée), mais des complications lors de l’opération ou post-opératoire, surtout à une époque où ces techniques étaient à leurs balbutiements, ont pu également accélérer la mortalité par rapport à une personne non (encore) greffée.</p>
</section>
<section id="cox-solutions-logiciels" class="level2">
<h2 class="anchored" data-anchor-id="cox-solutions-logiciels">Cox: solutions logiciels</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Sas</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">R - Stata, Python</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>La base n’est pas modifiée et la création de la TVC est faite “en aveugle” dans la procédure <code>phreg</code>, après l’instruction <code>model</code>. Ce n’est pas super.</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>La base doit être transformée en format long aux temps d’évènement (<code>survsplit</code> avec R, <code>stsplit</code> avec Stata) avant la création de la variable dynamique.</p>
</div>
</div>
</div>
<section id="modèle-à-temps-discret" class="level3">
<h3 class="anchored" data-anchor-id="modèle-à-temps-discret">Modèle à temps discret</h3>
<p>Même principe pour la construction de la variable dynamique. Pour rappel l’échelle temporelle est le mois, et on a créé en amont une variable qui transforme les jour d’attente en mois (<em>mwait</em>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="sc">+---------------------------------------------+</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> id   year   age   surgery   tvc   mwait   t <span class="sc">|</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span><span class="sc">---------------------------------------------</span><span class="er">|</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">13</span>     <span class="dv">68</span>    <span class="dv">54</span>         <span class="dv">0</span>     <span class="dv">0</span>       <span class="dv">2</span>   <span class="dv">1</span> <span class="sc">|</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">13</span>     <span class="dv">68</span>    <span class="dv">54</span>         <span class="dv">0</span>     <span class="dv">1</span>       <span class="dv">2</span>   <span class="dv">2</span> <span class="sc">|</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">13</span>     <span class="dv">68</span>    <span class="dv">54</span>         <span class="dv">0</span>     <span class="dv">1</span>       <span class="dv">2</span>   <span class="dv">3</span> <span class="sc">|</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">+---------------------------------------------+</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>Logistic regression                             Number of obs     <span class="ot">=</span>      <span class="dv">1</span>,<span class="dv">127</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                                                LR <span class="fu">chi2</span>(<span class="dv">7</span>)        <span class="ot">=</span>      <span class="fl">90.73</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>                                                Prob <span class="sc">&gt;</span> chi2       <span class="ot">=</span>     <span class="fl">0.0000</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>Log likelihood <span class="ot">=</span> <span class="sc">-</span><span class="fl">230.32152</span>                     Pseudo R2         <span class="ot">=</span>     <span class="fl">0.1645</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="sc">------------------------------------------------------------------------------</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>           e <span class="sc">|</span>      Coef.   Std. Err.      z    P<span class="sc">&gt;</span><span class="er">|</span>z<span class="sc">|</span>     [<span class="dv">95</span>% Conf. Interval]</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="sc">-------------+----------------------------------------------------------------</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>           t <span class="sc">|</span>   <span class="sc">-</span>.<span class="dv">365048</span>   .<span class="dv">0915105</span>    <span class="sc">-</span><span class="fl">3.99</span>   <span class="fl">0.000</span>    <span class="sc">-</span>.<span class="dv">5444052</span>   <span class="sc">-</span>.<span class="dv">1856907</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>          t2 <span class="sc">|</span>   .<span class="dv">0139226</span>   .<span class="dv">0053256</span>     <span class="fl">2.61</span>   <span class="fl">0.009</span>     .<span class="dv">0034846</span>    .<span class="dv">0243606</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>          t3 <span class="sc">|</span>   <span class="sc">-</span>.<span class="dv">000162</span>   .<span class="dv">0000815</span>    <span class="sc">-</span><span class="fl">1.99</span>   <span class="fl">0.047</span>    <span class="sc">-</span>.<span class="dv">0003217</span>   <span class="sc">-</span><span class="fl">2.27e-06</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>        year <span class="sc">|</span>  <span class="sc">-</span>.<span class="dv">1324928</span>   .<span class="dv">0737516</span>    <span class="sc">-</span><span class="fl">1.80</span>   <span class="fl">0.072</span>    <span class="sc">-</span>.<span class="dv">2770433</span>    .<span class="dv">0120577</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>         age <span class="sc">|</span>    .<span class="dv">033829</span>   .<span class="dv">0149503</span>     <span class="fl">2.26</span>   <span class="fl">0.024</span>      .<span class="dv">004527</span>    .<span class="dv">0631311</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>     surgery <span class="sc">|</span>  <span class="sc">-</span><span class="fl">1.007795</span>   .<span class="dv">4490177</span>    <span class="sc">-</span><span class="fl">2.24</span>   <span class="fl">0.025</span>    <span class="sc">-</span><span class="fl">1.887854</span>   <span class="sc">-</span>.<span class="dv">1277365</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>         tvc <span class="sc">|</span>  <span class="sc">-</span>.<span class="dv">0543011</span>   .<span class="dv">3114096</span>    <span class="sc">-</span><span class="fl">0.17</span>   <span class="fl">0.862</span>    <span class="sc">-</span>.<span class="dv">6646528</span>    .<span class="dv">5560505</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="sc">------------------------------------------------------------------------------</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>Remarque <span class="sc">:</span> la constante n’est pas reportée, les valeurs de la référence</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>n’ayant pas grand  <span class="fu">sens</span> (année et âge à <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="précautions" class="level1">
<h1>Précautions</h1>
<ul>
<li><p>Rappel: la cause doit précède l’effet.</p></li>
<li><p>Lorsque l’évènement étudié n’est pas intrinsèquement de type absorbant comme le décès, la « cause » peut se manifester ou plutôt être observée après la survenue de l’évènement étudié.Les modèles de durée standards ne peuvent pas gérer ces situations car l’observation sort du risque après la survenue de l’évènement.</p></li>
<li><p>Même si la cause est bien mesurée avant l’évènement d’intérêt, un « choc » n’est peut-être qu’un point final d’un processus causal antérieur: une séparation est rarement un évènement ponctuel, une phase plus ou moins longue de mésentente dans le couple lui a vraisemblablement préexister. La datation du début d’un processus causal n’est donc pas toujours facile à mesurer.</p>
<ul>
<li><strong>Logique d’adaptation</strong>: la « cause » identifiée est mesurée avant l’évènement étudié.</li>
<li><strong>Logique d’anticipation</strong>: la « cause » identifiée est mesurée après l’occurrence de l’évènement étudié. L’origine causale est bien antérieure à l’évènement, mais elle n’est pas directement observable.</li>
</ul></li>
<li><p>Lorsque les variables dynamiques sont de type quantitatives/continues, le problème on doit aussi considérer avec des phénomènes d’anticipation sur les valeurs attendues de ces variables, observées postérieurement à l’évènement étudié. On peut introduire des « lags » dans le modèle pour saisir ce phénomène : par exemple <span class="math inline">\(x_t= x_{t+1}\)</span>. Ce décalage des durées d’occurrence peut être aussi introduite pour les variables discrètes (naissance d’un enfant par exemple).</p></li>
</ul>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./discret.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Modèle temps discret</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./parametrique.html" class="pagination-link">
        <span class="nav-page-text">Modèles paramétriques</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb6" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Variables dynamiques"</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>Cette section sera principalement traitée par l'exemple, et on ne s'intéressera qu'aux variables de type discrète, avec un seul changement d'état.</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Dans un modèle de durée, une variable dynamique peut-être appréhendée comme une intéraction entre la durée et une variable quantitative.</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Pour un modèle de Cox, l'hypothèse de risque proportionnel ne peut donc pas être testée sur la variable d'origine.</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Ne pas tenir compte du caractère dynamique d'une dimension peut conduire à des interprétations erronées.</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Warning: La façon de modéliser les dimensions dynamiques en analyse des durées peut conduire à des biais de causalité, en particulier dans les sciences sociales, en omettant les effets d'anticipation. C'est une situation classique avec des covariables dynamiques de type discrètes. Les techniques standards ne peuvent modéliser que des effets d'adaptation : la cause - observée - précède l'effet.</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="fu"># Facteur dynamique traitée de manière fixe</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>On reprend l'exemple sur malformation cardiaque, en ajoutant la variable relative à la greffe. La question est donc: une transplantation du coeur réduit-elle le risque journalier de décéder (ou augmente la durée de survie).  </span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>On a dans la base 2 variables: une variable binaire pour savoir si l'individu à été greffé ou non, **tranplant**, et la variable *wait* de type continue tronquée  donnant la durée en jour jusqu'à l'opération depuis l'inscription dans le registre (0 si $transplant=0$).   </span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>On va dans un premier temps estimer le modèle (de Cox) avec la variable fixe *transplant*.   </span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="sc">------------------------------------------------------------------------------</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>          _t <span class="sc">|</span> Haz. ratio   Std. err.      z    P<span class="sc">&gt;</span><span class="er">|</span>z<span class="sc">|</span>     [<span class="dv">95</span>% conf. interval]</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="sc">-------------+----------------------------------------------------------------</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>        year <span class="sc">|</span>      <span class="fl">0.926</span>      <span class="fl">0.061</span>    <span class="sc">-</span><span class="fl">1.16</span>   <span class="fl">0.246</span>        <span class="fl">0.813</span>       <span class="fl">1.055</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>         age <span class="sc">|</span>      <span class="fl">1.058</span>      <span class="fl">0.015</span>     <span class="fl">3.91</span>   <span class="fl">0.000</span>        <span class="fl">1.029</span>       <span class="fl">1.089</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>     surgery <span class="sc">|</span>      <span class="fl">0.537</span>      <span class="fl">0.241</span>    <span class="sc">-</span><span class="fl">1.38</span>   <span class="fl">0.167</span>        <span class="fl">0.223</span>       <span class="fl">1.296</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>  transplant <span class="sc">|</span>      <span class="fl">0.251</span>      <span class="fl">0.079</span>    <span class="sc">-</span><span class="fl">4.38</span>   <span class="fl">0.000</span>        <span class="fl">0.135</span>       <span class="fl">0.466</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>        wait <span class="sc">|</span>      <span class="fl">0.993</span>      <span class="fl">0.005</span>    <span class="sc">-</span><span class="fl">1.48</span>   <span class="fl">0.139</span>        <span class="fl">0.983</span>       <span class="fl">1.002</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="sc">------------------------------------------------------------------------------</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>Interprétation: traité de manière fixe, la greffe réduit donc sensiblement le risque journalier de décéder </span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>Au niveau des données le modèle à été estimé, pour une personne greffée (ici id=70), à partir de ce mapping:</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+-------------------------------------------------------------+</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>      <span class="er">|</span> id   year   age   surgery   transp<span class="sc">~</span>t   wait   _d   _t   _t0 <span class="sc">|</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>      <span class="er">|</span><span class="sc">-------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a><span class="fl">1896.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>    <span class="dv">1</span>     <span class="dv">0</span> <span class="sc">|</span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a><span class="fl">1897.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>    <span class="dv">2</span>     <span class="dv">1</span> <span class="sc">|</span></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a><span class="fl">1898.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>    <span class="dv">3</span>     <span class="dv">2</span> <span class="sc">|</span></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a><span class="fl">1899.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>    <span class="dv">5</span>     <span class="dv">3</span> <span class="sc">|</span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a><span class="fl">1900.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>    <span class="dv">6</span>     <span class="dv">5</span> <span class="sc">|</span></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>      <span class="er">|</span><span class="sc">-------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a><span class="fl">1901.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>    <span class="dv">8</span>     <span class="dv">6</span> <span class="sc">|</span></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a><span class="fl">1902.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>    <span class="dv">9</span>     <span class="dv">8</span> <span class="sc">|</span></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a><span class="fl">1903.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>   <span class="dv">12</span>     <span class="dv">9</span> <span class="sc">|</span></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a><span class="fl">1904.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>   <span class="dv">16</span>    <span class="dv">12</span> <span class="sc">|</span></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a><span class="fl">1905.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>   <span class="dv">17</span>    <span class="dv">16</span> <span class="sc">|</span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>      <span class="er">|</span><span class="sc">-------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a><span class="fl">1906.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>   <span class="dv">18</span>    <span class="dv">17</span> <span class="sc">|</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a><span class="fl">1907.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>   <span class="dv">21</span>    <span class="dv">18</span> <span class="sc">|</span></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a><span class="fl">1908.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">0</span>   <span class="dv">28</span>    <span class="dv">21</span> <span class="sc">|</span></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a><span class="fl">1909.</span> <span class="sc">|</span> <span class="dv">70</span>     <span class="dv">72</span>    <span class="dv">52</span>         <span class="dv">0</span>          <span class="dv">1</span>      <span class="dv">5</span>    <span class="dv">1</span>   <span class="dv">30</span>    <span class="dv">28</span> <span class="sc">|</span></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>      <span class="sc">+-------------------------------------------------------------+</span></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>**Problème**: une personne est codée greffée avant le jour de la transplantation. L'effet *causal* est donc mal mesuré si sa dimension temporelle a été ignorée, ici le jour exact de l'opération. C'est le même principe pour l'évènement, la personne est codée décédée (1) le jour du décès, et vivante avant (0).  </span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;br&gt;</span></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a><span class="fu"># Estimation avec une variable dynamique</span></span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>Il convient donc de modifier l'information avec le délai d'attente jusqu'à la greffe. Quel que soit le logiciel, le principe de construction de la variable suit la logique suivante:\</span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>$tvc = transplant$ , si $transplant=1$ et $_t&lt;wait$ alors $tvc=0$.</span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a><span class="fu">### Modèle de Cox</span></span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a>  <span class="sc">+---------------------------------------------------------------------+</span></span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> id   year   age   surgery   tvc   wait   _d          _t         _t0 <span class="sc">|</span></span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span><span class="sc">---------------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">12</span>    <span class="dv">0</span>           <span class="dv">1</span>           <span class="dv">0</span> <span class="sc">|</span></span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">12</span>    <span class="dv">0</span>           <span class="dv">2</span>           <span class="dv">1</span> <span class="sc">|</span></span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">12</span>    <span class="dv">0</span>           <span class="dv">3</span>           <span class="dv">2</span> <span class="sc">|</span></span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">12</span>    <span class="dv">0</span>           <span class="dv">5</span>           <span class="dv">3</span> <span class="sc">|</span></span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">12</span>    <span class="dv">0</span>   <span class="fl">5.0999999</span>           <span class="dv">5</span> <span class="sc">|</span></span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span><span class="sc">---------------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">12</span>    <span class="dv">0</span>           <span class="dv">6</span>   <span class="fl">5.0999999</span> <span class="sc">|</span></span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">12</span>    <span class="dv">0</span>           <span class="dv">8</span>           <span class="dv">6</span> <span class="sc">|</span></span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">12</span>    <span class="dv">0</span>           <span class="dv">9</span>           <span class="dv">8</span> <span class="sc">|</span></span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">12</span>           <span class="dv">9</span> <span class="sc">|</span></span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">16</span>          <span class="dv">12</span> <span class="sc">|</span></span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span><span class="sc">---------------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">17</span>          <span class="dv">16</span> <span class="sc">|</span></span>
<span id="cb6-86"><a href="#cb6-86" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">18</span>          <span class="dv">17</span> <span class="sc">|</span></span>
<span id="cb6-87"><a href="#cb6-87" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">21</span>          <span class="dv">18</span> <span class="sc">|</span></span>
<span id="cb6-88"><a href="#cb6-88" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">28</span>          <span class="dv">21</span> <span class="sc">|</span></span>
<span id="cb6-89"><a href="#cb6-89" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">30</span>          <span class="dv">28</span> <span class="sc">|</span></span>
<span id="cb6-90"><a href="#cb6-90" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span><span class="sc">---------------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb6-91"><a href="#cb6-91" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">32</span>          <span class="dv">30</span> <span class="sc">|</span></span>
<span id="cb6-92"><a href="#cb6-92" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">35</span>          <span class="dv">32</span> <span class="sc">|</span></span>
<span id="cb6-93"><a href="#cb6-93" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">36</span>          <span class="dv">35</span> <span class="sc">|</span></span>
<span id="cb6-94"><a href="#cb6-94" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">37</span>          <span class="dv">36</span> <span class="sc">|</span></span>
<span id="cb6-95"><a href="#cb6-95" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">39</span>          <span class="dv">37</span> <span class="sc">|</span></span>
<span id="cb6-96"><a href="#cb6-96" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span><span class="sc">---------------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb6-97"><a href="#cb6-97" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">40</span>          <span class="dv">39</span> <span class="sc">|</span></span>
<span id="cb6-98"><a href="#cb6-98" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">43</span>          <span class="dv">40</span> <span class="sc">|</span></span>
<span id="cb6-99"><a href="#cb6-99" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">45</span>          <span class="dv">43</span> <span class="sc">|</span></span>
<span id="cb6-100"><a href="#cb6-100" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">50</span>          <span class="dv">45</span> <span class="sc">|</span></span>
<span id="cb6-101"><a href="#cb6-101" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">51</span>          <span class="dv">50</span> <span class="sc">|</span></span>
<span id="cb6-102"><a href="#cb6-102" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span><span class="sc">---------------------------------------------------------------------</span><span class="er">|</span></span>
<span id="cb6-103"><a href="#cb6-103" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">0</span>          <span class="dv">53</span>          <span class="dv">51</span> <span class="sc">|</span></span>
<span id="cb6-104"><a href="#cb6-104" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">10</span>     <span class="dv">68</span>    <span class="dv">42</span>         <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">12</span>    <span class="dv">1</span>          <span class="dv">58</span>          <span class="dv">53</span> <span class="sc">|</span></span>
<span id="cb6-105"><a href="#cb6-105" aria-hidden="true" tabindex="-1"></a>  <span class="sc">+---------------------------------------------------------------------+</span></span>
<span id="cb6-106"><a href="#cb6-106" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-107"><a href="#cb6-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-108"><a href="#cb6-108" aria-hidden="true" tabindex="-1"></a>Maintenant, si on estime le modèle avec cette variable dynamique qui indique clairement le moment de la transition (jour de la greffe):</span>
<span id="cb6-109"><a href="#cb6-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-110"><a href="#cb6-110" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb6-111"><a href="#cb6-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-112"><a href="#cb6-112" aria-hidden="true" tabindex="-1"></a>Cox regression with Efron method <span class="cf">for</span> ties</span>
<span id="cb6-113"><a href="#cb6-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-114"><a href="#cb6-114" aria-hidden="true" tabindex="-1"></a>No. of subjects <span class="ot">=</span>    <span class="dv">103</span>                                Number of obs <span class="ot">=</span>  <span class="dv">3</span>,<span class="dv">573</span></span>
<span id="cb6-115"><a href="#cb6-115" aria-hidden="true" tabindex="-1"></a>No. of failures <span class="ot">=</span>     <span class="dv">75</span></span>
<span id="cb6-116"><a href="#cb6-116" aria-hidden="true" tabindex="-1"></a>Time at risk    <span class="ot">=</span> <span class="dv">31</span>,<span class="dv">938</span></span>
<span id="cb6-117"><a href="#cb6-117" aria-hidden="true" tabindex="-1"></a>                                                        LR <span class="fu">chi2</span>(<span class="dv">4</span>)    <span class="ot">=</span>  <span class="fl">17.70</span></span>
<span id="cb6-118"><a href="#cb6-118" aria-hidden="true" tabindex="-1"></a>Log likelihood <span class="ot">=</span> <span class="sc">-</span><span class="fl">289.27014</span>                             Prob <span class="sc">&gt;</span> chi2   <span class="ot">=</span> <span class="fl">0.0014</span></span>
<span id="cb6-119"><a href="#cb6-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-120"><a href="#cb6-120" aria-hidden="true" tabindex="-1"></a><span class="sc">------------------------------------------------------------------------------</span></span>
<span id="cb6-121"><a href="#cb6-121" aria-hidden="true" tabindex="-1"></a>          _t <span class="sc">|</span> Haz. ratio   Std. err.      z    P<span class="sc">&gt;</span><span class="er">|</span>z<span class="sc">|</span>     [<span class="dv">95</span>% conf. interval]</span>
<span id="cb6-122"><a href="#cb6-122" aria-hidden="true" tabindex="-1"></a><span class="sc">-------------+----------------------------------------------------------------</span></span>
<span id="cb6-123"><a href="#cb6-123" aria-hidden="true" tabindex="-1"></a>        year <span class="sc">|</span>      <span class="fl">0.887</span>      <span class="fl">0.060</span>    <span class="sc">-</span><span class="fl">1.79</span>   <span class="fl">0.074</span>        <span class="fl">0.777</span>       <span class="fl">1.012</span></span>
<span id="cb6-124"><a href="#cb6-124" aria-hidden="true" tabindex="-1"></a>         age <span class="sc">|</span>      <span class="fl">1.031</span>      <span class="fl">0.014</span>     <span class="fl">2.19</span>   <span class="fl">0.029</span>        <span class="fl">1.003</span>       <span class="fl">1.059</span></span>
<span id="cb6-125"><a href="#cb6-125" aria-hidden="true" tabindex="-1"></a>     surgery <span class="sc">|</span>      <span class="fl">0.374</span>      <span class="fl">0.163</span>    <span class="sc">-</span><span class="fl">2.25</span>   <span class="fl">0.024</span>        <span class="fl">0.159</span>       <span class="fl">0.880</span></span>
<span id="cb6-126"><a href="#cb6-126" aria-hidden="true" tabindex="-1"></a>         tvc <span class="sc">|</span>      <span class="fl">0.921</span>      <span class="fl">0.281</span>    <span class="sc">-</span><span class="fl">0.27</span>   <span class="fl">0.787</span>        <span class="fl">0.507</span>       <span class="fl">1.674</span></span>
<span id="cb6-127"><a href="#cb6-127" aria-hidden="true" tabindex="-1"></a><span class="sc">------------------------------------------------------------------------------</span></span>
<span id="cb6-128"><a href="#cb6-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-129"><a href="#cb6-129" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-130"><a href="#cb6-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-131"><a href="#cb6-131" aria-hidden="true" tabindex="-1"></a>L'impact de la greffe apparaît maintenant bien plus contestable sur la survie des individus, tout du moins elle ne l'augmente pas. Cela ne signifie pas non plus que des personnes ont pu être "sauvée" grâce à cette opération (ou plutôt leur durée de vie augmentée), mais des complications lors de l'opération ou post-opératoire, surtout à une époque où ces techniques étaient à leurs balbutiements, ont pu également accélérer la mortalité  par rapport à une personne non (encore) greffée.</span>
<span id="cb6-132"><a href="#cb6-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-133"><a href="#cb6-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-134"><a href="#cb6-134" aria-hidden="true" tabindex="-1"></a><span class="fu">## Cox: solutions logiciels</span></span>
<span id="cb6-135"><a href="#cb6-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-136"><a href="#cb6-136" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb6-137"><a href="#cb6-137" aria-hidden="true" tabindex="-1"></a><span class="fu">### Sas</span></span>
<span id="cb6-138"><a href="#cb6-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-139"><a href="#cb6-139" aria-hidden="true" tabindex="-1"></a>La base n'est pas modifiée et la création de la TVC est faite "en aveugle" dans la procédure <span class="in">`phreg`</span>, après l'instruction <span class="in">`model`</span>. Ce n'est pas super.</span>
<span id="cb6-140"><a href="#cb6-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-141"><a href="#cb6-141" aria-hidden="true" tabindex="-1"></a><span class="fu">### R - Stata, Python</span></span>
<span id="cb6-142"><a href="#cb6-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-143"><a href="#cb6-143" aria-hidden="true" tabindex="-1"></a>La base doit être transformée en format long aux temps d'évènement (<span class="in">`survsplit`</span> avec R, <span class="in">`stsplit`</span> avec Stata) avant la création de la variable dynamique.</span>
<span id="cb6-144"><a href="#cb6-144" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-145"><a href="#cb6-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-146"><a href="#cb6-146" aria-hidden="true" tabindex="-1"></a><span class="fu">### Modèle à temps discret</span></span>
<span id="cb6-147"><a href="#cb6-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-148"><a href="#cb6-148" aria-hidden="true" tabindex="-1"></a>Même principe pour la construction de la variable dynamique. Pour rappel l'échelle temporelle est le mois, et on a créé en amont une variable qui transforme les jour d'attente en mois (*mwait*).</span>
<span id="cb6-149"><a href="#cb6-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-150"><a href="#cb6-150" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb6-151"><a href="#cb6-151" aria-hidden="true" tabindex="-1"></a><span class="sc">+---------------------------------------------+</span></span>
<span id="cb6-152"><a href="#cb6-152" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> id   year   age   surgery   tvc   mwait   t <span class="sc">|</span></span>
<span id="cb6-153"><a href="#cb6-153" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span><span class="sc">---------------------------------------------</span><span class="er">|</span></span>
<span id="cb6-154"><a href="#cb6-154" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">13</span>     <span class="dv">68</span>    <span class="dv">54</span>         <span class="dv">0</span>     <span class="dv">0</span>       <span class="dv">2</span>   <span class="dv">1</span> <span class="sc">|</span></span>
<span id="cb6-155"><a href="#cb6-155" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">13</span>     <span class="dv">68</span>    <span class="dv">54</span>         <span class="dv">0</span>     <span class="dv">1</span>       <span class="dv">2</span>   <span class="dv">2</span> <span class="sc">|</span></span>
<span id="cb6-156"><a href="#cb6-156" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span> <span class="dv">13</span>     <span class="dv">68</span>    <span class="dv">54</span>         <span class="dv">0</span>     <span class="dv">1</span>       <span class="dv">2</span>   <span class="dv">3</span> <span class="sc">|</span></span>
<span id="cb6-157"><a href="#cb6-157" aria-hidden="true" tabindex="-1"></a>  <span class="sc">+---------------------------------------------+</span></span>
<span id="cb6-158"><a href="#cb6-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-159"><a href="#cb6-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-160"><a href="#cb6-160" aria-hidden="true" tabindex="-1"></a>Logistic regression                             Number of obs     <span class="ot">=</span>      <span class="dv">1</span>,<span class="dv">127</span></span>
<span id="cb6-161"><a href="#cb6-161" aria-hidden="true" tabindex="-1"></a>                                                LR <span class="fu">chi2</span>(<span class="dv">7</span>)        <span class="ot">=</span>      <span class="fl">90.73</span></span>
<span id="cb6-162"><a href="#cb6-162" aria-hidden="true" tabindex="-1"></a>                                                Prob <span class="sc">&gt;</span> chi2       <span class="ot">=</span>     <span class="fl">0.0000</span></span>
<span id="cb6-163"><a href="#cb6-163" aria-hidden="true" tabindex="-1"></a>Log likelihood <span class="ot">=</span> <span class="sc">-</span><span class="fl">230.32152</span>                     Pseudo R2         <span class="ot">=</span>     <span class="fl">0.1645</span></span>
<span id="cb6-164"><a href="#cb6-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-165"><a href="#cb6-165" aria-hidden="true" tabindex="-1"></a><span class="sc">------------------------------------------------------------------------------</span></span>
<span id="cb6-166"><a href="#cb6-166" aria-hidden="true" tabindex="-1"></a>           e <span class="sc">|</span>      Coef.   Std. Err.      z    P<span class="sc">&gt;</span><span class="er">|</span>z<span class="sc">|</span>     [<span class="dv">95</span>% Conf. Interval]</span>
<span id="cb6-167"><a href="#cb6-167" aria-hidden="true" tabindex="-1"></a><span class="sc">-------------+----------------------------------------------------------------</span></span>
<span id="cb6-168"><a href="#cb6-168" aria-hidden="true" tabindex="-1"></a>           t <span class="sc">|</span>   <span class="sc">-</span>.<span class="dv">365048</span>   .<span class="dv">0915105</span>    <span class="sc">-</span><span class="fl">3.99</span>   <span class="fl">0.000</span>    <span class="sc">-</span>.<span class="dv">5444052</span>   <span class="sc">-</span>.<span class="dv">1856907</span></span>
<span id="cb6-169"><a href="#cb6-169" aria-hidden="true" tabindex="-1"></a>          t2 <span class="sc">|</span>   .<span class="dv">0139226</span>   .<span class="dv">0053256</span>     <span class="fl">2.61</span>   <span class="fl">0.009</span>     .<span class="dv">0034846</span>    .<span class="dv">0243606</span></span>
<span id="cb6-170"><a href="#cb6-170" aria-hidden="true" tabindex="-1"></a>          t3 <span class="sc">|</span>   <span class="sc">-</span>.<span class="dv">000162</span>   .<span class="dv">0000815</span>    <span class="sc">-</span><span class="fl">1.99</span>   <span class="fl">0.047</span>    <span class="sc">-</span>.<span class="dv">0003217</span>   <span class="sc">-</span><span class="fl">2.27e-06</span></span>
<span id="cb6-171"><a href="#cb6-171" aria-hidden="true" tabindex="-1"></a>        year <span class="sc">|</span>  <span class="sc">-</span>.<span class="dv">1324928</span>   .<span class="dv">0737516</span>    <span class="sc">-</span><span class="fl">1.80</span>   <span class="fl">0.072</span>    <span class="sc">-</span>.<span class="dv">2770433</span>    .<span class="dv">0120577</span></span>
<span id="cb6-172"><a href="#cb6-172" aria-hidden="true" tabindex="-1"></a>         age <span class="sc">|</span>    .<span class="dv">033829</span>   .<span class="dv">0149503</span>     <span class="fl">2.26</span>   <span class="fl">0.024</span>      .<span class="dv">004527</span>    .<span class="dv">0631311</span></span>
<span id="cb6-173"><a href="#cb6-173" aria-hidden="true" tabindex="-1"></a>     surgery <span class="sc">|</span>  <span class="sc">-</span><span class="fl">1.007795</span>   .<span class="dv">4490177</span>    <span class="sc">-</span><span class="fl">2.24</span>   <span class="fl">0.025</span>    <span class="sc">-</span><span class="fl">1.887854</span>   <span class="sc">-</span>.<span class="dv">1277365</span></span>
<span id="cb6-174"><a href="#cb6-174" aria-hidden="true" tabindex="-1"></a>         tvc <span class="sc">|</span>  <span class="sc">-</span>.<span class="dv">0543011</span>   .<span class="dv">3114096</span>    <span class="sc">-</span><span class="fl">0.17</span>   <span class="fl">0.862</span>    <span class="sc">-</span>.<span class="dv">6646528</span>    .<span class="dv">5560505</span></span>
<span id="cb6-175"><a href="#cb6-175" aria-hidden="true" tabindex="-1"></a><span class="sc">------------------------------------------------------------------------------</span></span>
<span id="cb6-176"><a href="#cb6-176" aria-hidden="true" tabindex="-1"></a>Remarque <span class="sc">:</span> la constante n’est pas reportée, les valeurs de la référence</span>
<span id="cb6-177"><a href="#cb6-177" aria-hidden="true" tabindex="-1"></a>n’ayant pas grand  <span class="fu">sens</span> (année et âge à <span class="dv">0</span>)</span>
<span id="cb6-178"><a href="#cb6-178" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-179"><a href="#cb6-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-180"><a href="#cb6-180" aria-hidden="true" tabindex="-1"></a><span class="fu"># Précautions</span></span>
<span id="cb6-181"><a href="#cb6-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-182"><a href="#cb6-182" aria-hidden="true" tabindex="-1"></a><span class="ss">*   </span>Rappel: la cause doit précède l'effet.</span>
<span id="cb6-183"><a href="#cb6-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-184"><a href="#cb6-184" aria-hidden="true" tabindex="-1"></a><span class="ss">*   </span>Lorsque l'évènement étudié n'est pas intrinsèquement de type absorbant comme le décès, la « cause » peut se manifester ou plutôt être observée après la survenue de l'évènement étudié.Les modèles de durée standards ne peuvent pas gérer ces situations car l'observation sort du risque après la survenue de l'évènement.</span>
<span id="cb6-185"><a href="#cb6-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-186"><a href="#cb6-186" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Même si la cause est bien mesurée avant l'évènement d'intérêt, un « choc » n'est peut-être qu'un point final d'un processus causal antérieur: une séparation est rarement un évènement ponctuel, une phase plus ou moins longue de mésentente dans le couple lui a vraisemblablement préexister. La datation du début d'un processus causal n'est donc pas toujours facile à mesurer.</span>
<span id="cb6-187"><a href="#cb6-187" aria-hidden="true" tabindex="-1"></a><span class="ss">  * </span>**Logique d'adaptation**: la « cause » identifiée est mesurée avant l'évènement étudié.</span>
<span id="cb6-188"><a href="#cb6-188" aria-hidden="true" tabindex="-1"></a><span class="ss">  * </span>**Logique d'anticipation**: la « cause » identifiée est mesurée après l'occurrence de l'évènement étudié. L'origine causale est bien antérieure à l'évènement, mais elle n'est pas directement observable.</span>
<span id="cb6-189"><a href="#cb6-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-190"><a href="#cb6-190" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Lorsque les variables dynamiques sont de type quantitatives/continues, le problème on doit aussi considérer avec des phénomènes d'anticipation sur les valeurs attendues de ces variables, observées postérieurement à l'évènement étudié. On peut introduire des « lags » dans le modèle pour saisir ce phénomène : par exemple $x_t= x_{t+1}$. Ce décalage des durées d'occurrence peut être aussi introduite pour les variables discrètes (naissance d'un enfant par exemple).</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">Marc Thévenin - Ined-Sms - Octobre 2022</div>
  </div>
</footer>



</body></html>